# 第1章 绪论与相关工作（约1200–1500字）
## 1.1 背景与意义
- 农业分选与供应链质控的现实痛点；人工分选效率与一致性不足；智能分选的价值。
## 1.2 问题与挑战
- 水果细粒度分类的难点：类间差异小、类内差异大、背景复杂、遮挡与光照变化等。
## 1.3 相关工作简述
- CNN与注意力机制（SE/CBAM等）在细粒度分类中的代表进展与不足；本文定位与改进点。
## 1.4 目标与贡献
- 目标：在兼顾推理效率的前提下提升复杂场景准确率与鲁棒性；
- 贡献：轻量注意力集成、针对性数据增强与清洗、系统化消融与泛化评估、可部署原型。

# 第2章 方法（约1500–1800字）
## 2.1 模型总体架构
- “预处理—骨干网络—注意力增强—分类头”的流水线与数据/特征流说明。
## 2.2 骨干与注意力集成
- 选择ResNet34的权衡（参数量、FLOPs、速度/精度）；
- 注意力模块的插入位置与计算流程，关键超参（通道缩放比、卷积核大小）。
## 2.3 损失函数与训练策略
- 交叉熵/标签平滑，类别不平衡（加权或focal）；
- 学习率调度、正则化、早停与混合精度；可选的数据增强策略（CutMix/RandomErasing）。

# 第3章 实验与分析（约2200–2600字）
## 3.1 可复现设置与数据
- 环境与版本、随机种子、数据划分；数据来源、规模、分布与清洗规则；归一化与增强细节。
## 3.2 训练细节与基线
- 批大小、学习率、epoch、优化器、权重衰减与调度；基线CNN（无注意力）说明。
## 3.3 主要结果
- Top-1/Top-5、Precision/Recall/F1、混淆矩阵；速度指标（时延/吞吐）。
## 3.4 消融与可视化
- 模块位置/强度/超参的消融；Grad-CAM/注意力热力图解释模型关注区域与误判案例。
## 3.5 鲁棒性与泛化
- 遮挡/光照/背景复杂度与噪声干扰下的性能；跨场景/设备的一致性初探。

# 第4章 系统与结论（约800–1000字）
## 4.1 部署与应用要点
- 模型导出（ONNX）、推理引擎（TensorRT/OpenVINO 可选）、并发与缓存；前端交互与接口约定（REST）。
## 4.2 结论与展望
- 研究结论与贡献回顾；局限性（长尾/极端条件/多域泛化等）；未来方向（更轻量注意力、蒸馏与量化、数据闭环、跨模态）。
